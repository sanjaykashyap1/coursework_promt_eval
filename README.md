
# Evaluation Script for Question-Answer Pairs

This project provides a Python script to evaluate the quality of answers generated by an application compared to the expected answers. The script reads a CSV file containing questions, expected answers, and app-generated answers, evaluates them, and outputs the evaluation metrics.

## Prerequisites

- Python 3.6 or higher
- `pandas` library

## Installation

1. **Clone the repository** (if applicable):

    ```sh
    git clone https://github.com/your-username/your-repo.git
    cd your-repo
    ```

2. **Install the required packages**:

    ```sh
    pip install pandas
    ```

## Usage

1. **Prepare your CSV file**:
   
   Ensure your CSV file (e.g., `data.csv`) has the following columns:
   - `Question`
   - `Expected Answer`
   - `App Generated Answer`

   Example of `data.csv`:

    | Question                        | Expected Answer                                                   | App Generated Answer                                                                                  |
    |---------------------------------|-------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
    | What's the issue reported by Al Grover? | There's a leak coming through his kitchen ceiling.                   | There is a leak coming through his kitchen ceiling.                                                   |
    | What is Charlie Johnson's problem? | He received the wrong color scarf                                    | Charlie Johnson's problem is that he received the wrong color Parker scarf for his wife's birthday and needs to exchange it for the correct color |
    | Why is Ron calling Regency limousine? | His limo is 30 minutes late                                         | Ron is calling Regency limousine because his daughter's limo for her senior prom is 30 minutes late and he wants to speak to someone about it. |
    | What did Steve Simmons want to do with the blender? | He wants to return a recalled blender and get a different model.   | He wanted to return it and get a different model due to a recall on the current model.                 |
    | Why is Jeff Matthews complaining? | His neighbors are being loud and disturbing his newborn baby.      | Jeff Matthews is complaining because his neighbors are being loud and disturbing his newborn baby's sleep. |

2. **Run the script**:

    ```sh
    python evaluate.py
    ```

    Ensure the script `evaluate.py` is in the same directory as your CSV file or provide the correct path to the CSV file in the script.

3. **Check the output**:
   
   The script will output the evaluated results to the console and save them to a new CSV file named `evaluated_results.csv`.

## Script Explanation

### `evaluate.py`

This script performs the following tasks:

1. **Load the data**: Reads the CSV file into a pandas DataFrame.
2. **Evaluation Function**: Compares the expected answers with the app-generated answers to compute evaluation metrics such as precision, recall, relevance, entity recall, faithfulness, and answer relevance.
3. **Evaluate and Compile Results**: Processes each row, evaluates it, and gathers the results.
4. **Output Results**: Appends the evaluation results to the original DataFrame and saves it to a new CSV file.

### Evaluation Metrics

- **Precision**: Measures the accuracy of the generated answer.
- **Recall**: Measures the completeness of the generated answer.
- **Relevance**: Indicates if the generated answer is relevant.
- **Entity Recall**: Measures if the key entities in the expected answer are present in the generated answer.
- **Faithfulness**: Indicates if the generated answer faithfully represents the expected answer.
- **Answer Relevance**: Measures the relevance of the generated answer.
- **Latency**: Simulated latency in seconds for generating the answer.

## Example

Here's an example of the evaluation results:

| Question                        | Expected Answer                                                   | App Generated Answer                                                                                  | Precision | Recall | Relevance | Entity Recall | Faithfulness | Answer Relevance | Latency |
|---------------------------------|-------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|-----------|--------|-----------|---------------|--------------|-----------------|---------|
| What's the issue reported by Al Grover? | There's a leak coming through his kitchen ceiling.                   | There is a leak coming through his kitchen ceiling.                                                   | 1.0       | 1.0    | High      | 1.0           | High          | 1.0             | Low     |
| What is Charlie Johnson's problem? | He received the wrong color scarf                                    | Charlie Johnson's problem is that he received the wrong color Parker scarf for his wife's birthday and needs to exchange it for the correct color | 1.0       | 1.0    | High      | 1.0           | High          | 1.0             | Low     |
| Why is Ron calling Regency limousine? | His limo is 30 minutes late                                         | Ron is calling Regency limousine because his daughter's limo for her senior prom is 30 minutes late and he wants to speak to someone about it. | 1.0       | 1.0    | High      | 1.0           | High          | 1.0             | Low     |
| What did Steve Simmons want to do with the blender? | He wants to return a recalled blender and get a different model.   | He wanted to return it and get a different model due to a recall on the current model.                 | 1.0       | 1.0    | High      | 1.0           | High          | 1.0             | Low     |
| Why is Jeff Matthews complaining? | His neighbors are being loud and disturbing his newborn baby.      | Jeff Matthews is complaining because his neighbors are being loud and disturbing his newborn baby's sleep. | 1.0       | 1.0    | High      | 1.0           | High          | 1.0             | Low     |

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.
